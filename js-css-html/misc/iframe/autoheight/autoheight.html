<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title>iframe1</title>
</head>
<body onload="iframeResizePipe()">

	<div style="border:1px solid #000;">
		<img src="http://imgs.xiuna.com/xiezhen/2012-5-24/2/9.jpg" width="100"><br/>
		一张图片
	</div>

	<!-- 解决跨域问题：引入其他域的 proxy.html -->
	<iframe id="helpframe" src='' height='0' width='0' frameborder='0'></iframe>
	<script>
	function iframeResizePipe() {
     // What's the page height?
     var height = document.body.scrollHeight;

		 // 另一种方法：设置 window.name
		 window.name = height;

     // Going to 'pipe' the data to the parent through the helpframe..
     var pipe = document.getElementById('helpframe');
     // Cachebuster a precaution here to stop browser caching interfering
     pipe.src = 'http://localhost/__/js/iframe/autoheight/proxy.html?height='+height+'&cacheb='+Math.random();
  }
	</script>
</body>
</html>
